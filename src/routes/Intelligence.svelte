<script>
  import { inView } from "motion";
  import { onMount } from "svelte";
  import { fade, slide, draw, fly } from "svelte/transition";
  import { quintOut } from "svelte/easing";

  let openned = false;
  let intelligence;

  onMount(() => {
    inView(intelligence, ({ target }) => {
      openned = true;

      return () => {
        openned = false;
      };
    });
  });
</script>

<section>
  <!-- <div class="flex justify-center px-10"> -->
  <svg
    class="w-[300px] xs:w-[400px] sm:w-[600px] aspect-square"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 465 394"
    fill="none"
  >
    {#if openned}
      <path
        transition:draw={{ duration: 80000, easing: quintOut }}
        d="M312.212 394V331.809L277.466 295.773C254.841 285.497 244.064 278.248 239.8 253.635M239.8 253.635L262.282 225.155C285.426 214.131 283.824 220.148 312.212 225.155C340.6 230.162 375.773 258.755 369.733 253.635C363.692 248.515 353.461 283.675 312.212 280.952C287.101 277.198 272.253 273.414 239.8 253.635ZM239.8 253.635L166.219 262.353C150.377 269.709 135.533 266.717 102.567 253.635L81.5439 225.155L88.8435 180.401L102.567 158.024M102.567 158.024L141.401 145.528L152.496 158.024L141.401 180.401L102.567 174.007V158.024ZM102.567 133.031L127.677 108.329L152.496 94.6706L195.126 87.1148L229.872 94.6706L251.187 108.329L271.042 124.604L303.452 145.528C320.641 146.25 326.294 142.18 334.695 133.031L319.803 108.329L297.321 104.551L277.466 108.329L262.282 145.528L256.735 159.768M222.573 158.024L195.126 174.007L184.906 195.222L195.126 217.599H222.573L239.8 195.222L251.187 174.007L256.735 159.768M222.573 158.024L256.735 159.768M222.573 158.024L303.452 166.742L334.695 180.401L369.733 207.718L402.143 247.532L415.866 253.635L436.889 247.532L453.24 225.155L462 195.222V166.742L453.24 145.528L442.145 128.091L429.006 122.569M429.006 122.569L415.866 117.048C403.209 112.428 396.114 111.543 383.456 117.048L375.865 140.587L390.756 158.024H415.866L429.59 140.587L429.006 122.569ZM429.006 104.551L415.866 79.8495L390.756 59.7973L369.733 51.3696L342.286 41.1982H319.803C319.803 41.1982 303.452 41.1982 297.321 51.3696C291.189 61.541 287.663 62.1532 288.561 73.4561L303.452 79.8495H319.803L334.695 73.4561V51.3696L319.803 31.3174L288.561 13.8808L256.735 4L222.573 13.8808M222.573 13.8808L195.126 20.2742L184.906 41.1982L195.126 59.7973H212.353L229.872 51.3696L239.8 31.3174M222.573 13.8808L239.8 31.3174M239.8 31.3174L212.353 8.94039C212.353 8.94039 195.126 4 178.775 8.94039C162.424 13.8808 154.387 7.42415 141.401 8.94039L110.158 20.2742L81.5439 41.1982L73.9523 59.7973M73.9523 59.7973C73.9523 59.7973 71.0173 72.5895 73.9523 79.8495C77.0275 87.4563 88.8435 94.6706 88.8435 94.6706C88.8435 94.6706 103.009 98.9336 110.158 94.6706C116.142 91.1029 120.086 79.8495 120.086 79.8495C120.086 79.8495 124.022 66.5672 120.086 59.7973C114.941 50.9483 104.737 47.4832 95.2672 51.3696M73.9523 59.7973C73.9523 59.7973 86.9432 54.6608 95.2672 51.3696M95.2672 51.3696C77.2509 59.9949 49.1336 73.4561 49.1336 73.4561L27.8187 94.6706L14.0954 124.604V158.024C14.0954 158.024 23.4264 174.798 33.9504 177.785C43.0564 180.371 53.0791 182.158 57.8931 174.007C61.0676 168.633 59.8151 163.963 57.8931 158.024C56.0581 152.354 54.1651 148.722 49.1336 145.528C42.106 141.066 35.8271 143.257 27.8187 145.528C15.5515 149.005 3 166.742 3 166.742V195.222L14.0954 217.599L27.8187 233.873L43.5779 243.396C43.9707 243.634 44.3899 243.815 44.8348 243.928C47.7613 244.669 59.9716 247.532 73.9523 247.532"
        fill="none"
        stroke="oklch(var(--p)"
        stroke-width="8"
        stroke-linejoin="round"
        stroke-linecap="round"
      />
    {/if}
  </svg>
  <!-- </div> -->

  <h2 bind:this={intelligence}>
    <span class="gradientText">Эмоциональный</span>
    интеллект
  </h2>

  {#if openned}
    <div
      in:fly={{ y: 200, duration: 2000 }}
      class="tooltip tooltip-open tooltip-bottom tooltip-primary"
      data-tip="Это способность использовать и понимать эмоции, управлять ими."
    />
  {/if}
</section>
